const DEFAULTXSTEPLENGTH=50*window.innerWidth/1920,DEFAULTYSTEPLENGTH=50*window.innerHeight/937,DEFAULTMINANIMATIONFRAMES=5;var uss={_xMapContainerAnimationID:new Map,_yMapContainerAnimationID:new Map,_xStepLengthCalculator:new Map,_yStepLengthCalculator:new Map,_xStepLength:DEFAULTXSTEPLENGTH,_yStepLength:DEFAULTYSTEPLENGTH,_minAnimationFrame:5,isXscrolling:function(t=window){const n=uss._xMapContainerAnimationID.get(t);return void 0!==n&&n.length>0},isYscrolling:function(t=window){const n=uss._yMapContainerAnimationID.get(t);return void 0!==n&&n.length>0},getXStepLengthCalculator:function(t=window){return uss._xStepLengthCalculator.get(t)},getYStepLengthCalculator:function(t=window){return uss._yStepLengthCalculator.get(t)},getXStepLength:function(){return uss._xStepLength},getYStepLength:function(){return uss._yStepLength},getMinAnimationFrame:function(){return uss._minAnimationFrame},setXStepLengthCalculator:function(t,n=window){if("function"!=typeof t)return void console.log("USS error: ",t," is not a function");const o=uss.getMaxScrollX(n),e=t(o,0,o,0,o);"number"!=typeof e||window.isNaN(e)?console.log("USS error: ",t," didn't return a valid step value"):uss._xStepLengthCalculator.set(n,t)},setYStepLengthCalculator:function(t,n=window){if("function"!=typeof t)return void console.log("USS error: ",t," is not a function");const o=uss.getMaxScrollY(n),e=t(o,0,o,0,o);"number"!=typeof e||window.isNaN(e)?console.log("USS error: ",t," didn't return a valid step value"):uss._yStepLengthCalculator.set(n,t)},setXStepLength:function(t){"number"!=typeof t||window.isNaN(t)?console.log("USS error: ",t," is not a number"):t<=0?console.log("USS error: ",t," must be a positive number"):uss._xStepLength=t},setYStepLength:function(t){"number"!=typeof t||window.isNaN(t)?console.log("USS error: ",t," is not a number"):t<=0?console.log("USS error: ",t," must be a positive number"):uss._yStepLength=t},setMinAnimationFrame:function(t){"number"!=typeof t||window.isNaN(t)?console.log("USS error: ",t," is not a number"):t<=0?console.log("USS error: ",t," must be a positive number"):uss._minAnimationFrame=t},calcXStepLength:function(t){return t>=(uss._minAnimationFrame-1)*uss._xStepLength?uss._xStepLength:Math.round(t/uss._minAnimationFrame)},calcYStepLength:function(t){return t>=(uss._minAnimationFrame-1)*uss._yStepLength?uss._yStepLength:Math.round(t/uss._minAnimationFrame)},getScrollXCalculator:function(t=window){return t instanceof HTMLElement?()=>t.scrollLeft:()=>t.scrollX},getScrollYCalculator:function(t=window){return t instanceof HTMLElement?()=>t.scrollTop:()=>t.scrollY},getMaxScrollX:function(t=window){const n=document.body,o=document.documentElement;return t instanceof HTMLElement?t.scrollWidth-t.offsetWidth:Math.max(n.scrollWidth,n.offsetWidth,n.clientWidth,o.clientWidth,o.scrollWidth,o.offsetWidth)-window.innerWidth},getMaxScrollY:function(t=window){const n=document.body,o=document.documentElement;return t instanceof HTMLElement?t.scrollHeight-t.offsetHeight:Math.max(n.scrollHeight,n.offsetHeight,n.clientHeight,o.clientHeight,o.scrollHeight,o.offsetHeight)-window.innerHeight},getScrollableParent:function(t=window,n=!1){try{let o=getComputedStyle(t);const e="absolute"===o.position,i=n?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===o.position)return window;for(let n=t;n=n.parentElement;)if(o=getComputedStyle(n),(!e||"static"!==o.position)&&i.test(o.overflow+o.overflowY+o.overflowX))return n;return window}catch(n){console.log("USS error: Couldn't get the parent container of the element:\n",t)}},scrollXTo:function(t,n=window,o=(()=>{}),e=!1){if("number"!=typeof t||window.isNaN(t))return void console.log("USS error: ",t," is not a number");const i=uss.getMaxScrollX(n);if(i<=0)return;t<0?t=0:t>i&&(t=i);const s=uss.getScrollXCalculator(n),r=uss.getScrollYCalculator(n);let l=t-s();const u=Math.sign(l);if((l*=u)<=0)return void("function"==typeof o&&setTimeout(o,0));const a=uss.calcXStepLength(l);!1===e&&uss.stopScrollingX(n);let c=uss._xMapContainerAnimationID.get(n);void 0===c&&(c=[]),c.push(window.requestAnimationFrame(function e(i){c=uss._xMapContainerAnimationID.get(n);c.shift();const d=s();const g=(t-d)*u;if(g<=0)return uss._xMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));let m;w?(m=f(g,i,l,d,t))<0&&(m=a):m=a;if(g<=m)return n.scroll(t,r()),uss._xMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));n.scroll(d+m*u,r());c.push(window.requestAnimationFrame(e));uss._xMapContainerAnimationID.set(n,c)})),uss._xMapContainerAnimationID.set(n,c);const f=uss._xStepLengthCalculator.get(n),w="function"==typeof f},scrollYTo:function(t,n=window,o=(()=>{}),e=!1){if("number"!=typeof t||window.isNaN(t))return void console.log("USS error: ",t," is not a number");const i=uss.getMaxScrollY(n);if(i<=0)return;t<0?t=0:t>i&&(t=i);const s=uss.getScrollXCalculator(n),r=uss.getScrollYCalculator(n);let l=t-r();const u=Math.sign(l);if((l*=u)<=0)return void("function"==typeof o&&setTimeout(o,0));const a=uss.calcYStepLength(l);!1===e&&uss.stopScrollingY(n);let c=uss._yMapContainerAnimationID.get(n);void 0===c&&(c=[]),c.push(window.requestAnimationFrame(function e(i){c=uss._yMapContainerAnimationID.get(n);c.shift();const d=r();const g=(t-d)*u;if(g<=0)return uss._yMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));let m;w?(m=f(g,i,l,d,t))<0&&(m=a):m=a;if(g<=m)return n.scroll(s(),t),uss._yMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));n.scroll(s(),d+m*u);c.push(window.requestAnimationFrame(e));uss._yMapContainerAnimationID.set(n,c)})),uss._yMapContainerAnimationID.set(n,c);const f=uss._yStepLengthCalculator.get(n),w="function"==typeof f},scrollXBy:function(t,n=window,o=(()=>{}),e=!1){"number"!=typeof t||window.isNaN(t)?console.log("USS error: ",t," is not a number"):0!==t&&uss.scrollXTo(uss.getScrollXCalculator(n)()+t,n,o,e)},scrollYBy:function(t,n=window,o=(()=>{}),e=!1){"number"!=typeof t||window.isNaN(t)?console.log("USS error: ",t," is not a number"):0!==t&&uss.scrollYTo(uss.getScrollYCalculator(n)()+t,n,o,e)},scrollTo:function(t,n,o=window,e=window,i=(()=>{}),s=(()=>{}),r=!1,l=!1){setTimeout(()=>uss.scrollXTo(t,o,i,r),0),setTimeout(()=>uss.scrollYTo(n,e,s,l),0)},scrollBy:function(t,n,o=window,e=window,i=(()=>{}),s=(()=>{}),r=!1,l=!1){setTimeout(()=>uss.scrollXBy(t,o,i,r),0),setTimeout(()=>uss.scrollYBy(n,e,s,l),0)},scrollIntoView:function(t=window,n=!0,o=!0,e=!1){if(t===window)return;const i=uss.getScrollableParent(t,e),s=t.getBoundingClientRect();let r,l;if(i!==window){const t=i.getBoundingClientRect(),e=!0===n?t.left:!1===n?t.left-window.innerWidth+t.width:t.left-window.innerWidth/2+t.width/2,u=!0===o?t.top:!1===o?t.top-window.innerHeight+t.height:t.top-window.innerHeight/2+t.height/2;r=!0===n?s.left-t.left:!1===n?s.left-t.left-t.width+s.width:s.left-t.left-t.width/2+s.width/2,l=!0===o?s.top-t.top:!1===o?s.top-t.top-t.height+s.height:s.top-t.top-t.height/2+s.height/2,setTimeout(()=>uss.scrollXBy(e,window,null,!1),0),setTimeout(()=>uss.scrollYBy(u,window,null,!1),0)}else r=!0===n?s.left:!1===n?s.left-window.innerWidth+s.width:s.left-window.innerWidth/2+s.width/2,l=!0===o?s.top:!1===o?s.top-window.innerHeight+s.height:s.top-window.innerHeight/2+s.height/2;setTimeout(()=>uss.scrollXBy(r,i,null,!1),0),setTimeout(()=>uss.scrollYBy(l,i,null,!1),0)},stopScrollingX:function(t=window,n=(()=>{})){let o=uss._xMapContainerAnimationID.get(t);void 0!==o&&0!==o.length&&(o.forEach(t=>window.cancelAnimationFrame(t)),uss._xMapContainerAnimationID.set(t,[]),"function"==typeof n&&setTimeout(n,0))},stopScrollingY:function(t=window,n=(()=>{})){let o=uss._yMapContainerAnimationID.get(t);void 0!==o&&0!==o.length&&(o.forEach(t=>window.cancelAnimationFrame(t)),uss._yMapContainerAnimationID.set(t,[]),"function"==typeof n&&setTimeout(n,0))},hrefSetup:function(t=!1){const n=document.links,o=document.URL.split("#")[0];for(pageLink of n){const n=pageLink.href.split("#");if(n[0]!==o)continue;const e=document.getElementById(n[1]);e instanceof HTMLElement&&pageLink.addEventListener("click",n=>{n.preventDefault(),uss.scrollIntoView(e,!0,!0,t)},{passive:!1})}}};
