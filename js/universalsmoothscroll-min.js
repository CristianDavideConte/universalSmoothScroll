const DEFAULTXSTEPLENGTH=50*window.innerWidth/1920,DEFAULTYSTEPLENGTH=50*window.innerHeight/937,DEFAULTMINANIMATIONFRAMES=5;var uss={_xMapContainerAnimationID:new Map,_yMapContainerAnimationID:new Map,_xStepLengthCalculator:new Map,_yStepLengthCalculator:new Map,_xStepLength:DEFAULTXSTEPLENGTH,_yStepLength:DEFAULTYSTEPLENGTH,_minAnimationFrame:5,isXscrolling:function(t=window){const n=uss._xMapContainerAnimationID.get(t);return void 0!==n&&n.length>0},isYscrolling:function(t=window){const n=uss._yMapContainerAnimationID.get(t);return void 0!==n&&n.length>0},isScrolling:function(t=window){return uss.isXscrolling(t)||uss.isYscrolling(t)},getXStepLengthCalculator:function(t=window){return uss._xStepLengthCalculator.get(t)},getYStepLengthCalculator:function(t=window){return uss._yStepLengthCalculator.get(t)},getXStepLength:function(){return uss._xStepLength},getYStepLength:function(){return uss._yStepLength},getMinAnimationFrame:function(){return uss._minAnimationFrame},setXStepLengthCalculator:function(t,n=window){if("function"!=typeof t)return void console.error("USS Error:",t,"is not a function");const o=uss.getMaxScrollX(n),e=t(o,0,o,0,o,n);"number"!=typeof e||window.isNaN(e)?console.error("USS Error:",t.name||"Anonymous function","didn't return a valid step value"):uss._xStepLengthCalculator.set(n,t)},setYStepLengthCalculator:function(t,n=window){if("function"!=typeof t)return void console.error("USS Error:",t,"is not a function");const o=uss.getMaxScrollY(n),e=t(o,0,o,0,o,n);"number"!=typeof e||window.isNaN(e)?console.error("USS Error:",t.name||"Anonymous function","didn't return a valid step value"):uss._yStepLengthCalculator.set(n,t)},setXStepLength:function(t){"number"!=typeof t||window.isNaN(t)?console.error("USS Error:",t,"is not a number"):t<=0?console.error("USS Error:",t,"must be a positive number"):uss._xStepLength=t},setYStepLength:function(t){"number"!=typeof t||window.isNaN(t)?console.error("USS Error:",t,"is not a number"):t<=0?console.error("USS Error:",t,"must be a positive number"):uss._yStepLength=t},setMinAnimationFrame:function(t){"number"!=typeof t||window.isNaN(t)?console.error("USS Error:",t,"is not a number"):t<=0?console.error("USS Error:",t,"must be a positive number"):uss._minAnimationFrame=t},calcXStepLength:function(t){return t>=(uss._minAnimationFrame-1)*uss._xStepLength?uss._xStepLength:Math.round(t/uss._minAnimationFrame)},calcYStepLength:function(t){return t>=(uss._minAnimationFrame-1)*uss._yStepLength?uss._yStepLength:Math.round(t/uss._minAnimationFrame)},getScrollXCalculator:function(t=window){return t instanceof HTMLElement?()=>t.scrollLeft:()=>t.scrollX},getScrollYCalculator:function(t=window){return t instanceof HTMLElement?()=>t.scrollTop:()=>t.scrollY},getMaxScrollX:function(t=window){const n=document.documentElement,o=document.body;return t instanceof HTMLElement?t.scrollWidth-t.clientWidth:Math.max(o.scrollWidth,o.offsetWidth,o.clientWidth,n.clientWidth,n.scrollWidth,n.offsetWidth)-n.clientWidth},getMaxScrollY:function(t=window){const n=document.documentElement,o=document.body;return t instanceof HTMLElement?t.scrollHeight-t.clientHeight:Math.max(o.scrollHeight,o.offsetHeight,o.clientHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)-n.clientHeight},getScrollableParent:function(t=window,n=!1){try{let o=getComputedStyle(t);const e="absolute"===o.position,i=n?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===o.position)return window;for(let n=t;n=n.parentElement;)if(o=getComputedStyle(n),(!e||"static"!==o.position)&&i.test(o.overflow+o.overflowY+o.overflowX))return n;return window}catch(n){console.error("USS Error: Couldn't get the parent container of the element",t)}},scrollXTo:function(t,n=window,o=(()=>{}),e=!1){if("number"!=typeof t||window.isNaN(t))return void console.error("USS Error:",t,"is not a number");if(uss.getMaxScrollX(n)<=0)return;t<0&&(t=0);const i=uss.getScrollXCalculator(n),s=uss.getScrollYCalculator(n);let r=t-i();const l=Math.sign(r);if((r*=l)<=0)return void("function"==typeof o&&setTimeout(o,0));const u=uss.calcXStepLength(r);!1===e&&uss.stopScrollingX(n,null);let c=uss._xMapContainerAnimationID.get(n);void 0===c&&(c=[]),c.push(window.requestAnimationFrame(function e(w){c=uss._xMapContainerAnimationID.get(n);c.shift();const d=i();const p=(t-d)*l;if(p<=0)return uss._xMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));let m;f?(m=a(p,w,r,d,t,n))<0&&(m=u):m=u;if(p<=m)return n.scroll(t,s()),uss._xMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));n.scroll(d+m*l,s());if(d===i())return uss._xMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));c.push(window.requestAnimationFrame(e));uss._xMapContainerAnimationID.set(n,c)})),uss._xMapContainerAnimationID.set(n,c);const a=uss._xStepLengthCalculator.get(n),f="function"==typeof a},scrollYTo:function(t,n=window,o=(()=>{}),e=!1){if("number"!=typeof t||window.isNaN(t))return void console.error("USS Error:",t,"is not a number");if(uss.getMaxScrollY(n)<=0)return;t<0&&(t=0);const i=uss.getScrollXCalculator(n),s=uss.getScrollYCalculator(n);let r=t-s();const l=Math.sign(r);if((r*=l)<=0)return void("function"==typeof o&&setTimeout(o,0));const u=uss.calcYStepLength(r);!1===e&&uss.stopScrollingY(n,null);let c=uss._yMapContainerAnimationID.get(n);void 0===c&&(c=[]),c.push(window.requestAnimationFrame(function e(w){c=uss._yMapContainerAnimationID.get(n);c.shift();const d=s();const p=(t-d)*l;if(p<=0)return uss._yMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));let m;f?(m=a(p,w,r,d,t,n))<0&&(m=u):m=u;if(p<=m)return n.scroll(i(),t),uss._yMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));n.scroll(i(),d+m*l);if(d===s())return uss._yMapContainerAnimationID.set(n,c),void("function"==typeof o&&setTimeout(o,0));c.push(window.requestAnimationFrame(e));uss._yMapContainerAnimationID.set(n,c)})),uss._yMapContainerAnimationID.set(n,c);const a=uss._yStepLengthCalculator.get(n),f="function"==typeof a},scrollXBy:function(t,n=window,o=(()=>{}),e=!1){"number"!=typeof t||window.isNaN(t)?console.error("USS Error:",t,"is not a number"):0!==t&&uss.scrollXTo(uss.getScrollXCalculator(n)()+t,n,o,e)},scrollYBy:function(t,n=window,o=(()=>{}),e=!1){"number"!=typeof t||window.isNaN(t)?console.error("USS Error:",t,"is not a number"):0!==t&&uss.scrollYTo(uss.getScrollYCalculator(n)()+t,n,o,e)},scrollTo:function(t,n,o=window,e=window,i=(()=>{}),s=(()=>{}),r=!1,l=!1){setTimeout(()=>uss.scrollXTo(t,o,i,r),0),setTimeout(()=>uss.scrollYTo(n,e,s,l),0)},scrollBy:function(t,n,o=window,e=window,i=(()=>{}),s=(()=>{}),r=!1,l=!1){setTimeout(()=>uss.scrollXBy(t,o,i,r),0),setTimeout(()=>uss.scrollYBy(n,e,s,l),0)},scrollIntoView:function(t=window,n=!0,o=!0,e=!1){if(t===window)return;const i=uss.getScrollableParent(t,e),s=t.getBoundingClientRect();let r,l;if(i!==window){const t=i.getBoundingClientRect(),e=!0===n?t.left:!1===n?t.left-window.innerWidth+t.width:t.left-window.innerWidth/2+t.width/2,u=!0===o?t.top:!1===o?t.top-window.innerHeight+t.height:t.top-window.innerHeight/2+t.height/2;r=!0===n?s.left-t.left:!1===n?s.left-t.left-t.width+s.width:s.left-t.left-t.width/2+s.width/2,l=!0===o?s.top-t.top:!1===o?s.top-t.top-t.height+s.height:s.top-t.top-t.height/2+s.height/2,setTimeout(()=>uss.scrollXBy(e,window,null,!1),0),setTimeout(()=>uss.scrollYBy(u,window,null,!1),0)}else r=!0===n?s.left:!1===n?s.left-window.innerWidth+s.width:s.left-window.innerWidth/2+s.width/2,l=!0===o?s.top:!1===o?s.top-window.innerHeight+s.height:s.top-window.innerHeight/2+s.height/2;setTimeout(()=>uss.scrollXBy(r,i,null,!1),0),setTimeout(()=>uss.scrollYBy(l,i,null,!1),0)},stopScrollingX:function(t=window,n=(()=>{})){let o=uss._xMapContainerAnimationID.get(t);void 0!==o&&0!==o.length&&(o.forEach(t=>window.cancelAnimationFrame(t)),uss._xMapContainerAnimationID.set(t,[]),"function"==typeof n&&setTimeout(n,0))},stopScrollingY:function(t=window,n=(()=>{})){let o=uss._yMapContainerAnimationID.get(t);void 0!==o&&0!==o.length&&(o.forEach(t=>window.cancelAnimationFrame(t)),uss._yMapContainerAnimationID.set(t,[]),"function"==typeof n&&setTimeout(n,0))},stopScrolling:function(t=window,n=(()=>{})){uss.stopScrollingX(t,null),uss.stopScrollingY(t,n)},hrefSetup:function(t=(()=>{}),n=!1){const o=document.links,e=document.URL.split("#")[0],i="function"==typeof t;for(pageLink of o){const o=pageLink.href.split("#");if(o[0]!==e)continue;const s=document.getElementById(o[1]);s instanceof HTMLElement&&(i?pageLink.addEventListener("click",o=>{o.preventDefault(),t(),uss.scrollIntoView(s,!0,!0,n)},{passive:!1}):pageLink.addEventListener("click",t=>{t.preventDefault(),uss.scrollIntoView(s,!0,!0,n)},{passive:!1}))}}};
